@name xbyte_3d_engine testExample
@inputs Memory
@persist S:wirelink 
interval( 100 )

if( first() ) {
    
    #include "xbyte_3d_engine/main"
    
    S = entity():isWeldedTo():wirelink() # - egp screen
    S:cl() # - cleaning egp screen
    
    # - Initizalizing objects table
    
    Objects = table(
#[    "grass"=table(
        "Vertices" = array(
        vec(-2, -2, 1),
        vec(-2, 2, 1),
        vec(2, 2, 1),
        vec(2, -2, 1)
        ),
        "Quads" = array(
        vec(1, 2, 3),
        vec(3, 4, 1)
        ),
        "Index"=16,
        "ObjPos"=vec( 0, 0, 0 ),
        "ObjAngles"=ang(),
        "RotatedLocal"=array(),
        "Translated"=array()
    ),]#
    "cube"=table(
        "Vertices" = array( # - object vertices
        vec(-0.25, -0.25, -0.25),
        vec(-0.25, 0.25, -0.25),
        vec(0.25, 0.25, -0.25),
        vec(0.25, -0.25, -0.25),
        
        vec(-0.25, -0.25, 0.25),
        vec(-0.25, 0.25, 0.25),
        vec(0.25, 0.25, 0.25),
        vec(0.25, -0.25, 0.25)),
        
        "Quads" = array( # - object quads
        vec(1, 2, 3),
        vec(3, 4, 1),
        
        vec(8, 7, 6),
        vec(6, 5, 8),
        
        vec(5, 6, 2),
        vec(2, 1, 5),
        
        vec(7, 8, 4),
        vec(4, 3, 7),
        
        vec(6, 7, 3),
        vec(3, 2, 6),
        
        vec(1, 4, 8),
        vec(8, 5, 1)
        ),
        "UV" = table(), # - quad index = material
        "Pos"=vec( -2, 0, 0 ), # - object position
        "Ang"=ang(), # - object angle
        "RotatedLocal"=array(), # - object array
        "Translated"=array() # - object array
        )
    )
    
    foreach( I, Obj:table = Objects ) { for( O = 1, Obj:obj_quads():count() ) { Obj["UV", table][O, string] = "vgui/resource/icon_steam" } } # - setting up objects quads materials
    
    initialize( table( 
        S, # - egp screen
        vec(), # - camera position
        ang(), # - camera angles
        93.32, # - camera fov
        vec2( 512 ), # - camera resolution
        Objects # - objects table
        ) 
    ) # - Render and Scene initialize
    # ATTENTION: if you edited the table of objects after initialization, then you will need to reinitialize (render_init( table ( ... ) ))
}

Render:graphics_update()
Render:camera():controls( Memory )
